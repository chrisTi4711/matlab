clc; clear;

format rat

A0 = [1 0;0 1;1 1];
b0 = [1 1 1]';

P0 = (A0'*A0)^(-1)
x0 = P0*A0'*b0

A1 = [2 1];
b1 = [3];

a1 = A1';
P1 = P0 - (P0*a1*a1'*P0)/(1+a1'*P0*a1)
x1 = x0 + P1*a1*(b1-a1'*x0)

A2 = [3 1];
b2 = [4];

a2 = A2';
P2 = P1 - (P1*a2*a2'*P1)/(1+a2'*P1*a2)
x2 = x1 + P2*a2*(b2-a2'*x1)

%------------
disp('check:')
A=[A0;A1;A2];
b=[b0;b1;b2];
x=A\b